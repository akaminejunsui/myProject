new function(){var DOMReflector=b$.bdom.util.DOMReflector;var RFL_DOM2Control=b$.bdom.util.RFL_DOM2Control;var RFL_PortalModel2Control=RFL_DOM2Control.extend(null,{ns:'http://backbase.com/2012/portalView',localName:'baseElement',getNS:function(model){var sLocalName=this.getLocalName(model);if(b$.bdom.namespaces['http://backbase.com/2013/portalView']&&b$.bdom.namespaces['http://backbase.com/2013/portalView'].classes[sLocalName]){return'http://backbase.com/2013/portalView';}else if(b$.bdom.namespaces['http://backbase.com/2012/portalView']&&b$.bdom.namespaces['http://backbase.com/2012/portalView'].classes[sLocalName]){return'http://backbase.com/2012/portalView';};return this.ns;},initInstance:function(bdom,model){bdom.model=model;}});var RFL_PM2CtrlwithTemplateName=RFL_PortalModel2Control.extend(null,{getNS:function(model){if(this.localName.toLowerCase()=='container'){var sLocalName=model.originalItem.preferences['TemplateName'].value;};if(this.localName.toLowerCase()=='page'){var sLocalName=this.getLocalName(model);};if(model.getAttribute('viewNamespace')){return model.getAttribute('viewNamespace');}else if(b$.bdom.namespaces['http://backbase.com/2013/portalView']&&b$.bdom.namespaces['http://backbase.com/2013/portalView'].classes[sLocalName]){return'http://backbase.com/2013/portalView';}else if(b$.bdom.namespaces['http://backbase.com/2012/portalView']&&b$.bdom.namespaces['http://backbase.com/2012/portalView'].classes[sLocalName]){return'http://backbase.com/2012/portalView';};return this.ns;},getLocalName:function(model){var sViewClass=this.localName;var p=model.originalItem.preferences['TemplateName'];if(model.getAttribute('viewNamespace')){sViewClass=p.value;}else if(p&&b$.bdom.namespaces['http://backbase.com/2013/portalView']&&b$.bdom.namespaces['http://backbase.com/2013/portalView'].classes[p.value]){sViewClass=p.value;}else if(p&&b$.bdom.namespaces['http://backbase.com/2012/portalView']&&b$.bdom.namespaces['http://backbase.com/2012/portalView'].classes[p.value]){sViewClass=p.value;}return sViewClass;},initInstance:function(bdom,model){bdom.model=model;attachBehaviors(model,bdom);copyPrefs(model,bdom);}});var RFL_PM2Widget=RFL_PortalModel2Control.extend(null,{localName:'widget',getLocalName:function(model){var sViewClass='widget';var p=model.originalItem.preferences['TemplateName'];if(p){if(p.value=='Standard_Widget'){sViewClass='backbaseWidget';}else if(p.value=='W3C_Widget'){sViewClass='w3cWidget';}}return sViewClass;},initInstance:function(bdom,model){bdom.model=model;attachBehaviors(model,bdom);copyPrefs(model,bdom);}});function copyPrefs(model,bdom){for(var i=0,l=model.preferences.array.length;i<l;i++){var p=model.preferences.array[i];bdom.setAttribute(p.name,p.value);}}var attachBehaviors=function(model,node){var behaviorsPref=model.getPreference('behaviors')||'';var behaviorProviders=behaviorsPref.split(' ');for(var i=0,l=behaviorProviders.length;i<l;i++){try{var behaviorProvider=require(behaviorProviders[i]);if(behaviorProvider&&behaviorProvider.behaviors){for(var h in behaviorProvider.behaviors){if(behaviorProvider.behaviors.hasOwnProperty(h)){node.addEventListener(h,behaviorProvider.behaviors[h]);}}}}catch(err){console.log('Unable to attach behavior '+behaviorProviders[i]+': '+err.message);}}};function require(sName){var oContext=window;var aNameParts=sName.split('.');if(aNameParts.length==1&&aNameParts[0]=='')return oContext;for(var i=0;i<aNameParts.length;i++){if(aNameParts[i]in oContext){oContext=oContext[aNameParts[i]];}else{var oError=new Error('Cannot find object "'+sName+'".');if(oError.stack){var sLastCall=oError.stack&&oError.stack.split('\n')[2];var aResults=sLastCall&&sLastCall.match(/^[^@]*@(.*):(\d+)$/);if(aResults&&aResults[1]&&aResults[2]){oError=new Error(oError.message,aResults[1],Number(aResults[2]));}}throw oError;}}return oContext;};var domReflector=new DOMReflector();domReflector.getID=function(model){return'VIEW-'+model._jxid;}
domReflector.addToSet('default',[new RFL_PM2Widget({'match':'Widget','localName':'widget'}),new RFL_PM2CtrlwithTemplateName({'match':'Container','localName':'container'}),new RFL_PM2CtrlwithTemplateName({'match':'Link','localName':'link'}),new RFL_PM2CtrlwithTemplateName({'match':'Page','localName':'page'}),new RFL_PortalModel2Control({'match':'Catalog','localName':'catalog'}),new RFL_PortalModel2Control({'match':'Portal','localName':'portal'}),new RFL_PortalModel2Control({'match':'Application','localName':'application'})]);b$.portal.portalReflector=domReflector;b$.portal.setController('portal',domReflector);}