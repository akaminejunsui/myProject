function FormatAmt(j,f,d,h,e,g,a){var b="";if(f==""){return""}if(j.charAt(0)=="-"){b="-"}j=FormatAmtWithoutCurrCode(j,d,h,e,g,a,"true");if(j==""){return""}if(e=="true"){j=f+" "+b+j}else{j=b+j+" "+f}return j}function FormatAmtWithoutCurrCode(a,h,m,d,n,o,k){var p=false;var b=-1;var l=-1;var g=-1;var q=0;if(a==""||h==null||d==""){return""}if(a.length==1&&a.charAt(0)=="-"){return""}if(a.charAt(0)=="-"){if(k=="true"){a=a.substring(1,a.length)}else{return""}}for(var f=0;f<a.length;f++){c=a.substring(f,f+1);if(c<"0"||c>"9"){if(c==m){if(h==0){return""}else{remain=a.substring(f+1,a.length);if(remain.indexOf(m)!=-1){return""}if(remain.length>h){return""}}g=f}else{if(n=="true"&&c==o){b=f;q=0;if(l==-1){if(b==0||b>3){return""}l=b}else{if(b-l!=4){return""}else{l=b}}}else{return""}}}else{p=true;q++}}if(!p){return""}if(n=="true"&&b!=-1){if(g!=-1){if(g-b!=4){return""}}else{if(q!=3){return""}}}if(h>0){decimalpos=a.indexOf(m);a=removeLeadingZero(a,decimalpos);decimalpos=a.indexOf(m);if(decimalpos==-1){a=a+m;decimal=""}else{decimal=a.substring(decimalpos+1,a.length)}if(decimal.length<h){for(var e=decimal.length+1;e<=h;e++){a=a+"0"}}if(decimalpos==0){a="0"+a}}if(n=="true"&&b==-1){a=appendThousandSeperator(a,o,m)}return a}function appendThousandSeperator(b,k,h){var d="";var g=b.indexOf(h);if(g==-1){d=b}else{d=b.substring(0,g)}var f=d.length;if(f<=3){return b}var j="";var a=0;for(var e=f;e>0;e--){a++;c=b.substring(e,e-1);j=c+j;if(a!=f&&a%3==0){j=k+j}}return j+b.substring(g)}function removeLeadingZero(d,a){if(a==-1){for(var b=0;b<d.length;b++){c=d.substring(b,b+1);if(c!="0"){return d.substring(b,d.length)}}return d}else{amtBfrDec=d.substring(0,a);for(var b=0;b<amtBfrDec.length;b++){c=amtBfrDec.substring(b,b+1);if(c!="0"){amtBfrDec=amtBfrDec.substring(b,amtBfrDec.length);break}}return amtBfrDec+d.substring(a,d.length)}}function replace(d,b,a){if(d.length==0||b.length==0||a.length==0){return""}first=d.indexOf(b,0);if(first==-1){return""}return d.substring(0,first)+a+d.substring(first+b.length,d.length)}function sfClearCred(){if(document.forms[subAppContextName].elements.pwd!=null){document.forms[subAppContextName].elements.pwd.value=""}if(document.forms[subAppContextName].elements.pin!=null){document.forms[subAppContextName].elements.pin.value=""}sfClearTanCred();if(document.forms[subAppContextName].elements.cvv2!=null){document.forms[subAppContextName].elements.cvv2.value=""}if(document.forms[subAppContextName].elements.expDate!=null){document.forms[subAppContextName].elements.expDate.value=""}}function sfClearTanCred(){if(document.forms[subAppContextName].elements.tan!=null){document.forms[subAppContextName].elements.tan.value=""}}function SubmitForm(a){encryptSensitiveFields(a);a.submit()}function encryptSensitiveFields(f,g,d){if(g==null){g=""+isFormEncryptionSupported}else{g=""+g}if(g!="true"){return}var b=new Array();var a=new String();if(d==null){d=strList}if(d.substring(0,1)=="["){d=d.substring(1,d.length-1)}indexOfComa=d.indexOf(",");if(indexOfComa!="-1"){b=d.split(",");a=getEncryptionString(f,b)}else{b[0]=d;a=getEncryptionString(f,b)}var e=callEncryptionAPI(a);var h=document.createElement("input");h.setAttributeNode(createHtmlAttribute("name","encryptedParams"));h.setAttributeNode(createHtmlAttribute("value",e));h.type="hidden";f.appendChild(h)}function callEncryptionAPI(a){var d=20;var f=a;var e=new String();for(var b=0;b<a.length;b=b+d){var g;if(f.length>d){g=f.substring(0,d);f=f.substring(d,f.length);if(e.length>0){e=e+ENCRYPTED_STRING_SEP+encryptFormFields(g)}else{e=encryptFormFields(g)}}else{g=f;if(e.length>0){e=e+ENCRYPTED_STRING_SEP+encryptFormFields(g)}else{e=encryptFormFields(g)}f=""}}return e}function encryptFormFields(b){var a="c";var d=eid+","+a+encryptData(a+b);return d}function getEncryptionString(g,e){var b;var d=new String();var j="";var h="false";for(var f=0;f<e.length;f++){var a=trim(e[f]);formProp=g[a];if(typeof formProp!="undefined"){b=encodeURIComponent(formProp.value);formProp.value="";if(((typeof d!="undefined")&&d.length!=0)||h=="true"){d=d+ENCRYPT_FIELD_SEP+b;h="false"}else{if(d.length==0&&b.length!=0){h="true";d=b}else{if(b.length==0){h="true";d=j}}}}else{if(((typeof d!="undefined")&&d.length!=0)||h=="true"){h="false";d=d+ENCRYPT_FIELD_SEP+j}else{h="true";d=j}}}if(d==j){d=ENCRYPT_FIELD_SEP}return d}function createHtmlAttribute(a,d){var b=document.createAttribute(a);b.nodeValue=d;return b}function ltrim(a){a=String(a);var b=0;while(a.charAt(b)==" "){b++}return a.substr(b)}function rtrim(a){a=String(a);var b=a.length-1;while(a.charAt(b)==" "){b--}return a.substring(0,b+1)}function trim(a){return ltrim(rtrim(a))}function encryptSensitiveData(a,h,f){if(h==null){h=""+isFormEncryptionSupported}else{h=""+h}if(h!="true"){return a}var d=new Array();var b=new String();if(f==null){f=strList}if(f.substring(0,1)=="["){f=f.substring(1,f.length-1)}var k=f.indexOf(",");if(k!="-1"){d=f.split(",");b=getEncryptedData(a,d)}else{d[0]=f;b=getEncryptedData(a,d)}if(b==null||b.length==0){a=a}else{try{var g=callEncryptionAPI(b);a=newPostData+"&encryptedParams="+g}catch(j){}}return a}function getEncryptedData(d,m){var b=new String();var n="";var a="false";var l=d.split("&");var g;newPostData=n;for(var h=0;h<m.length;h++){var k=n;var e=trim(m[h]);for(var f=0;f<l.length;f++){g=l[f].split("=");if(g!=null&&g.length>1&&e==g[0]){k=g[1];break}}if(b.length!=0){if(k==n){b=b+ENCRYPT_FIELD_SEP}else{b=b+k+ENCRYPT_FIELD_SEP;k=n}}else{if(k==n){b=ENCRYPT_FIELD_SEP}else{b=k+ENCRYPT_FIELD_SEP}}}for(var h=0;h<l.length;h++){g=l[h].split("=");a=false;if(g!=null&&g.length>1){for(var f=0;f<m.length;f++){var e=trim(m[f]);if(e==g[0]){a=true;break}}if(a==false){if(newPostData==""){newPostData=l[h]}else{newPostData=newPostData+"&"+l[h]}}}}return b}function urlencode(a){a=encodeURIComponent(a);a=a.replace(/\~/g,"%7E").replace(/\!/g,"%21").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\'/g,"%27");a=a.replace(/%20/g,"+");return a}function getFinalURL(h,g){var e=new RegExp(location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),"g");h=h.replace(e,"");if(h.toLowerCase().substring(0,4)!="http"){var f=$("#brandingData_serverPath").html().toLowerCase();var g=typeof(g)!="undefined"&&g;if(!g&&h.toLowerCase().substring(0,f.length)!=f){h=$("#brandingData_appPath").html()+h}else{h=$("#brandingData_serverDomain").html()+h}}if($("#locale_lang").length>0){if(h.indexOf("?")>0){h=h+"&locale="+$("#locale_lang").val()+"_US"}else{h=h+"?locale="+$("#locale_lang").val()+"_US"}}return h}var child_win=null;function launchPopup(e,f,g){e=getFinalURL(e,true);if(f=="_top"){top.location.href=e;return}var h=document.cookie.split("; ");f=tv(h,"BV_IDS");f=f.substring(38,48);if(f==null||f==""){f="childWin"}if(g!=null&&g!=""){if(g.indexOf("location=")==-1){g+=",location=1"}}if(child_win!=null&&!child_win.closed){child_win.close()}child_win=window.open(e,f,g)}function tv(a,l){var m=/[<>"';%]/;var j=new Array(2);for(i=0;i<a.length;i++){j[0]=a[i].substring(0,a[i].indexOf("="));j[1]=a[i].substring(a[i].indexOf("=")+1);if(j[0]==l&&j[1]!=""){var h=j[1];h=unescape(h);var k=m.test(h);if(k){h=""}return h}}return""};